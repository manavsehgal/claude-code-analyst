# Active Backlog

[x] Scaffold a minimal Python project structure with scripts/ folder where Python scripts will reside, tests/ folder for tests, docs/ folder for user guides. The project is managed by [uv](https://docs.astral.sh/uv/) for Python virtual environment and dependencies management
    **Completed**: Initialized uv project with `pyproject.toml` configured for claude-code-analyst (Python >=3.13). Created required directory structure: scripts/, tests/, docs/. Project now has proper Python project scaffolding with uv managing virtual environment and dependencies.

[x] Read [Claude Code best practices](https://www.anthropic.com/engineering/claude-code-best-practices) and write a minimal CLAUDE.md file for the project
    **Completed**: Reviewed Claude Code best practices from the official documentation. Created CLAUDE.md file with essential configuration including: common commands (development setup, linting, type checking), project structure overview, code style guidelines following PEP 8, testing instructions using pytest, repository etiquette, and developer environment setup requirements (Python >=3.13, uv package management).

[x] Create an article_to_md Python script to perform following actions: 
1. take a HTML web page url as input and scrapes the main article
2. check this is a valid HTML and respect robots.txt when scraping
3. ignore everything else including navigation, sidebar, footer, ads
4. create a destination folder markdown/kebab-case-title/
5. convert the scraped article as valid markdown which is well-formatted like original source 
6. save the markdown in the destination folder
7. download images within the article, save in images/ folder wihin destination folder
8. embed the relative references to the images within the markdown in same place as in the original source
    **Completed**: Created `scripts/article_to_md.py` script with full functionality for converting web articles to markdown. Implemented using readability-lxml for article extraction, beautifulsoup4 for HTML parsing, markdownify for markdown conversion, and requests for web scraping. The script respects robots.txt, validates HTML, extracts main article content, creates kebab-case directories, downloads images to an images/ subfolder, and properly embeds relative image references in the markdown. Added necessary dependencies to pyproject.toml: requests, beautifulsoup4, markdownify, and readability-lxml. Script tested successfully with example.com.

[x] Update article_to_md script to add metadata to markdown including article date if available, date scraped, article length in words, number of images, source url, article title. Article should have a level 1 heading matching the title.
    **Completed**: Enhanced scripts/article_to_md.py to include comprehensive metadata in YAML frontmatter format. Added extract_article_date() function that checks multiple meta tags (article:published_time, datePublished, etc.) and time tags for publication dates. Implemented word counting functionality with count_words(). Modified process_images() to return image count. Updated main function to collect all metadata (title, source URL, article date if available, scraping date, word count, image count) and format it as YAML frontmatter at the top of the markdown file. Added the article title as a level 1 heading after the metadata. Enhanced console output to display word count and image count statistics. Tested successfully with example.com.

[x] Make the article_to_md script available as a tool use for Claude Code by updating CLAUDE.md crisply and referencing docs/article-to-md-guide.md if required.
    **Completed**: Added "Available Tools" section to CLAUDE.md with comprehensive documentation for the article_to_md script. Updated docs/article-to-md-guide.md to include new metadata features (YAML frontmatter with title, source URL, article date, scrape date, word count, and image count). The tool is now properly documented and available for Claude Code usage with clear usage examples and reference to the detailed guide.

[x] Update the scripts/article_to_md.py to not add extra newlines to wrap text in markdown and only follow the HTML formatting to decide when to add newlines.
    **Completed**: Removed artificial text wrapping from the markdownify conversion by eliminating `wrap=True` and `wrap_width=80` parameters from the `md()` function call in `convert_to_markdown()`. The script now preserves natural text flow based on HTML structure rather than forcing line breaks at fixed character widths. Verified with example.com that text now flows naturally without arbitrary wrapping, maintaining readability while respecting the original HTML formatting for newline placement.

[x] Study the custom slash command .claude/commands/mermaid.md to add its definition to CLAUDE.md as a custom tool that is available to Claude Code
    **Completed**: Reviewed the mermaid custom command definition in .claude/commands/mermaid.md. Added comprehensive documentation to CLAUDE.md under "Available Tools" section, describing it as "Mermaid Visualization Generator (Custom Command)". Documented its features including: analyzing markdown content, creating multiple Mermaid.js diagrams (flowcharts, timelines, mindmaps), organizing output in mermaid/kebab-case-title/ folders, and including contextual text with visualizations. Provided usage syntax (/mermaid <markdown-file-path>) and detailed the 5-step automatic process the command follows.

[x] Update scripts/article_to_md.py to also work with downloaded html path as source.
    **Completed**: Enhanced article_to_md.py script to accept both URLs and local HTML file paths as input. Added is_url() function to detect input type and read_local_html() function to read local files. Modified main() function to handle both cases - URLs are fetched via HTTP while local files are read directly from disk. The script automatically skips robots.txt check for local files and properly handles relative/absolute file paths. Updated argument parser to accept "source" parameter instead of "url" with updated help text. Tested successfully with both URL inputs (maintains existing functionality) and local HTML files (new functionality). The script now works seamlessly with both web articles and downloaded HTML files.

[x] Update CLAUDE.md and docs/article-to-md-guide.md with revised capabilities of scripts/article_to_md.py to handle local HTML file paths.
    **Completed**: Updated both CLAUDE.md and docs/article-to-md-guide.md to fully document the enhanced capabilities of article_to_md.py. In CLAUDE.md, modified the "Article to Markdown Converter" section to show usage with both web URLs and local HTML files, updated command examples, and enhanced the features list to highlight dual input support and automatic detection. In docs/article-to-md-guide.md, made comprehensive updates including: updated overview and features sections, added separate usage examples for web URLs and local files, changed command-line parameter from "url" to "source", enhanced metadata format documentation, restructured "How It Works" section with input detection and dual content retrieval, added new "Working with Local HTML Files" section covering use cases, file path handling, image processing, and integration with html_downloader.py, updated examples with local file scenarios, enhanced error handling with file-specific errors, added comprehensive batch processing examples for mixed sources, and updated limitations section to distinguish between web and local file constraints. Both documentation files now provide complete guidance for using the enhanced script with either web articles or local HTML files.